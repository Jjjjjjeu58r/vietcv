<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quản trị CV</title>
<link rel="stylesheet" href="assets/css/style.css" />
<style>
  body{padding:2rem;font-family:Inter,system-ui,sans-serif;}
  .login-box{max-width:340px;margin:4rem auto;border:1px solid #444;padding:1.5rem;border-radius:10px;background:#111;}
  .login-box h1{margin-top:0;font-size:1.4rem;text-align:center;}
  .hidden{display:none!important;}
  .grid{display:grid;gap:1.2rem;}
  textarea,input[type=text],input[type=password]{width:100%;background:#1c1f24;border:1px solid #333;color:#eee;padding:.65rem .75rem;border-radius:6px;font-size:.95rem;}
  button{cursor:pointer;background:#2563eb;border:none;color:#fff;padding:.65rem 1rem;border-radius:6px;font-weight:600;}
  button.secondary{background:#374151;}
  .flex{display:flex;gap:.6rem;align-items:center;}
  .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;}
  .status{font-size:.8rem;opacity:.8;}
  .sections{display:flex;flex-wrap:wrap;gap:1rem;}
  .panel{flex:1 1 320px;min-width:320px;border:1px solid #333;padding:1rem;border-radius:10px;background:#161a20;position:relative;}
  .panel h2{margin-top:0;font-size:1rem;text-transform:uppercase;letter-spacing:.08em;color:#93c5fd;}
  pre.code{background:#0d1117;padding:.75rem;border-radius:8px;max-height:300px;overflow:auto;font-size:.75rem;}
  .save-indicator{position:absolute;top:.6rem;right:.8rem;font-size:.7rem;opacity:.6;}
  .danger{color:#f87171;}
  .mono{font-family:ui-monospace,monospace;font-size:.75rem;}
  .wide textarea{min-height:140px;}
  .toast{position:fixed;bottom:1rem;right:1rem;background:#111;border:1px solid #333;padding:.75rem 1rem;border-radius:6px;opacity:0;transform:translateY(10px);transition:.4s;}
  .toast.show{opacity:1;transform:translateY(0);}
</style>
</head>
<body>
<div class="login-box" id="pin-box">
  <h1>Nhập mã PIN</h1>
  <input type="password" id="pin-input" placeholder="Mã PIN" autocomplete="off" />
  <button id="pin-btn">Vào</button>
  <div id="pin-status" class="status"></div>
</div>
<div id="app">
  <div class="topbar">
    <div>
      <strong>Quản trị nội dung CV</strong>
      <div class="status" id="session-status"></div>
    </div>
    <div class="flex">
      <button id="reload-btn" class="secondary">Nạp lại</button>
      <button id="save-btn">Lưu tất cả</button>
    </div>
  </div>
  <div id="server-config" style="background:#111;border:1px solid #333;padding:0.75rem 1rem;border-radius:8px;margin-bottom:1rem;display:flex;flex-wrap:wrap;gap:.6rem;align-items:flex-end;">
    <div style="flex:1 1 210px;min-width:200px;">
      <label style="display:block;font-size:.65rem;opacity:.7;margin-bottom:2px;">API URL</label>
      <input type="text" id="api-url" placeholder="https://your-api.example.com" />
    </div>
    <div style="flex:1 1 160px;min-width:150px;">
      <label style="display:block;font-size:.65rem;opacity:.7;margin-bottom:2px;">Server Password</label>
      <input type="password" id="api-pass" placeholder="ADMIN_PASSWORD" />
    </div>
    <div style="display:flex;gap:.5rem;">
      <button type="button" id="api-connect" class="secondary">Kết nối</button>
      <button type="button" id="api-disconnect" class="secondary" style="display:none;">Ngắt</button>
      <button type="button" id="mode-toggle" class="secondary" title="Chuyển lưu: server <-> static">Chế độ: Static</button>
    </div>
    <div id="api-status" style="font-size:.65rem;opacity:.75;flex:1 1 100%;margin-top:.3rem;">Chế độ STATIC: Lưu sẽ tải file content.json.</div>
  </div>
  <div class="sections" id="sections"></div>
  <h3>Xem JSON hiện tại</h3>
  <pre class="code mono" id="raw-json"></pre>
</div>
<div class="toast" id="toast"></div>
<script src="assets/js/admin.js" type="module"></script>
</body>
</html>
